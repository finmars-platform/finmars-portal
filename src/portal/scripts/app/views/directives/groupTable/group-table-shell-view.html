<div class="g-wrapper" data-ng-class="{'g-root-wrapper': isRootEntityViewer}">

    <div class="g-content-wrap">

        <div class="g-workarea-wrap" >
            <div class="g-workarea main-area"
                 data-ng-if="contentWrapElem"
                 ng-class="{'column-group-areas-collapsed': groupingAndColumnAreaCollapsed}"
                 ev-data-service="evDataService"
                 ev-event-service="evEventService">
                <div class="g-grouping-section" data-ng-if="components.groupingArea">
                    <group-grouping ev-data-service="evDataService"
                                    ev-event-service="evEventService"
                                    attribute-data-service="attributeDataService"
                                    content-wrap-element="contentWrapElem"></group-grouping>
                </div>
                <div class="g-table-section">
                    <div>
                        <div class="g-table-wrap">

                            <div class="g-column-area-wrap">
                                <group-columns ev-data-service="evDataService"
                                               ev-event-service="evEventService"
                                               attribute-data-service="attributeDataService"
                                               content-wrap-element="contentWrapElem"
                                ></group-columns>

                                <md-button data-ng-if="!isInsideDashboard"
                                           class="toggle-group-column-area-btn"
                                           ng-click="toggleGroupAndColumnArea()">
                                    <ng-md-icon ng-hide="groupingAndColumnAreaCollapsed"
                                                icon="keyboard_arrow_up"></ng-md-icon>
                                    <ng-md-icon ng-hide="!groupingAndColumnAreaCollapsed"
                                                icon="keyboard_arrow_down"></ng-md-icon>
                                </md-button>
                            </div>

                            <group-table-body data-ng-if="viewType == 'report_viewer'"
                                              class="group-table-body"
                                              ev-data-service="evDataService"
                                              ev-event-service="evEventService"
                                              content-wrap-element="contentWrapElem"
                                              root-wrap-element="rootWrapElem"
                            ></group-table-body>

                            <report-viewer-matrix data-ng-if="viewType == 'matrix'"
                                                  class="height-100 display-block"
                                                  style="height: 600px;"
                                                  matrix-settings="viewSettings"
                                                  ev-data-service="evDataService"
                                                  ev-event-service="evEventService"></report-viewer-matrix>

                            <div g-c-areas-drag-and-drop
                                 ev-data-service="evDataService"
                                 ev-event-service="evEventService"
                                 content-wrap-element="contentWrapElem"
                                 root-wrap-element="rootWrapElem"
                            ></div>


                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div data-ng-if="isInsideDashboard" class="g-dashboard-filter-holder">

            <md-button class="toggle-dashboard-filter-btn"
                       ng-click="toggleDashboardFilter()">
                <ng-md-icon ng-hide="dashboardFilterCollapsed"
                            icon="keyboard_arrow_left"></ng-md-icon>
                <ng-md-icon ng-hide="!dashboardFilterCollapsed"
                            icon="keyboard_arrow_right"></ng-md-icon>
            </md-button>

            <div class="g-dashboard-filter">

                <group-dashboard-filter ev-data-service="evDataService" data-ng-show="!dashboardFilterCollapsed"
                                        ev-event-service="evEventService"></group-dashboard-filter>
            </div>

        </div>

        <div class="g-filter-sidebar main-sidebar" ng-if="components.sidebar">
            <div>
                <div class="g-filter" id="filtersbag">
                    <group-sidebar-filter ev-data-service="evDataService"
                                          ev-event-service="evEventService"
                                          attribute-data-service="attributeDataService"
                                          sp-exchange-service="spExchangeService"
                                          content-wrap-element="contentWrapElem"></group-sidebar-filter>
                </div>
            </div>
        </div>

    </div>

    <div class="g-additions" data-ng-if="isRootEntityViewer && additions.isOpen">

        <div group-height-aligner
             ev-data-service="evDataService"
             ev-event-service="evEventService"></div>

        <div class="g-height-slider"></div>

        <div class="g-additions-data-editor min-height" data-ng-if="additions.type === 'editor'">

            <div data-ng-if="activeObjectsCount > 1">
                <div class="g-additions-editor-caption">
                    Too many rows selected
                </div>
            </div>

            <div data-ng-if="activeObjectsCount <= 1">

                <div data-ng-show="!activeObject">
                    <div class="g-additions-editor-caption">
                        Select row to start
                    </div>
                </div>
                <div data-ng-show="activeObject" class="min-height">
                    <group-editor-binder ev-data-service="evDataService"
                                         ev-event-service="evEventService"></group-editor-binder>
                </div>

            </div>


        </div>
        <div class="g-additions-workarea" data-ng-if="additions.type === 'permission-editor'">

            <group-permission-editor-binder class="display-block height-100" ev-data-service="evDataService"
                                         ev-event-service="evEventService"
                                         sp-exchange-service="spExchangeService"></group-permission-editor-binder>

        </div>
        <div class="g-additions-workarea"
             data-ng-if="additions.type === 'balance-report'">
            <group-split-panel-report-binder ev-data-service="evDataService"
                                             ev-event-service="evEventService"
                                             sp-exchange-service="spExchangeService"></group-split-panel-report-binder>
        </div>

        <div class="g-additions-workarea"
             data-ng-if="additions.type === 'pl-report'">
            <group-split-panel-report-binder ev-data-service="evDataService"
                                             ev-event-service="evEventService"
                                             sp-exchange-service="spExchangeService"></group-split-panel-report-binder>
        </div>

        <div class="g-additions-workarea"
             data-ng-if="additions.type === 'transaction-report'">
            <group-split-panel-report-binder ev-data-service="evDataService"
                                             ev-event-service="evEventService"
                                             sp-exchange-service="spExchangeService"></group-split-panel-report-binder>
        </div>
    </div>

    <div ng-if="contentWrapElem">

        <div group-layout-resizer ev-data-service="evDataService"
             workarea-wrap-element="workareaWrapElem"
             ev-event-service="evEventService"></div>

    </div>
</div>
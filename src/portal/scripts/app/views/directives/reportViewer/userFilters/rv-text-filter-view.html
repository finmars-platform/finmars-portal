<md-card ng-class="{'f-disabled': !filter.options.enabled}" class="g-filter-item">
    <!--<md-tooltip data-ng-if="sideNavCollapsed" class="" md-direction="top">{{filter.name}}<span
            data-ng-if="!getFilterType(filter['value_type'])">: {{filter.options.query}}</span></md-tooltip>-->

    <div layout="row"
         layout-align="center center"
         style="margin-bottom: 13px;">
        <span flex ng-bind="filter.name"
              flex="100"
              style="text-align: center;"></span>
    </div>

    <div layout="row" layout-align="center start">
        <md-checkbox ng-model="filter.options.enabled"
                     aria-label="filters"
                     class="md-primary table-filter-activity-checkbox"
                     ng-change="toggleFilterState(filter)"
                     flex="15"></md-checkbox>

        <div ng-if="filter.options.filter_type !== 'multiselector'"
             flex="70">
            <div ng-if="filter.options.filter_type !== 'selector'" class="table-filter-input-container">
                <md-input-container>
                    <label>
                        <span ng-bind="getFilterRegime()"></span>
                    </label>

                    <input data-ng-model="filter.options.filter_values[0]"
                           data-ng-change="filterChange()"
                           data-ng-model-options="{debounce: 1000}">
                </md-input-container>
            </div>

            <div ng-if="filter.options.filter_type === 'selector'"
                 class="table-filter-input-container text-filter-select">

                <md-input-container>
                    <label>
                        <span ng-bind="getFilterRegime()"></span>
                    </label>

                    <input ng-model="filter.options.filter_values[0]"
                           ng-change="filterChange()"
                           ng-model-options="{debounce: 1000}"
                           ng-click="toggleFilterSelectMenu('show')">
                </md-input-container>

                <div class="table-filter-select-options text-filter-select-menu visibility-hidden">
                    <md-input-container md-no-float>
                        <input type="search"
                               ng-model="searchTerm"
                               placeholder="Search for a ..."
                               class="md-text md-select-search-pattern simple-search-filter-input"
                               ng-keydown="$event.stopPropagation()">
                    </md-input-container>
                    <div class="table-filter-select-options-holder">
                        <md-button
                                ng-repeat="selectOption in filterSelectOptions | filter: searchTerm as results track by $index"
                                ng-bind="selectOption"
                                ng-click="selectFilterOption(selectOption)">
                        </md-button>
                    </div>
                </div>

            </div>

        </div>

        <div ng-if="filter.options.filter_type === 'multiselector'"
             flex="70">
            <two-fields-multiselect data-title="{{getMultiselectorName()}}"
                                    data-items="columnRowsContent"
                                    data-model="filter.options.filter_values"
                                    data-name-property="name"
                                    class="table-filter-input-container"></two-fields-multiselect>
        </div>

        <div class="settings-btn" flex="15">
            <md-menu>
                <md-button aria-label="Open phone interactions menu"
                           class="md-icon-button"
                           ng-click="$mdMenu.open($event)">
                    <ng-md-icon icon="settings"></ng-md-icon>
                </md-button>
                <md-menu-content width="3">
                    <md-menu-item>
                        <md-menu>
                            <md-button class="g-settings-option-btn"
                                       ng-click="$mdOpenMenu($event)"
                                       aria-label="show submenu with filter types">
                                <ng-md-icon icon="arrow_drop_up"
                                            class="z-arrow-left-icon"></ng-md-icon>
                                <span>Filter</span>
                            </md-button>
                            <md-menu-content class="dropdown-buttons-menu" width="3">
                                <md-button ng-click="changeFilterType('contain')">
                                    <ng-md-icon icon="done"
                                                ng-show="filter.options.filter_type !== 'contain'"
                                                style="visibility: hidden;"></ng-md-icon>
                                    <ng-md-icon icon="done"
                                                ng-show="filter.options.filter_type === 'contain'"></ng-md-icon>
                                    Contains
                                </md-button>
                                <md-button ng-click="changeFilterType('does_not_contain')">
                                    <ng-md-icon icon="done"
                                                ng-show="filter.options.filter_type !== 'does_not_contain'"
                                                style="visibility: hidden;"></ng-md-icon>
                                    <ng-md-icon icon="done"
                                                ng-show="filter.options.filter_type === 'does_not_contain'"></ng-md-icon>
                                    Does not contain
                                </md-button>
                                <md-button ng-click="changeFilterType('selector')">
                                    <ng-md-icon icon="done"
                                                ng-show="filter.options.filter_type !== 'selector'"
                                                style="visibility: hidden;"></ng-md-icon>
                                    <ng-md-icon icon="done"
                                                ng-show="filter.options.filter_type === 'selector'"></ng-md-icon>
                                    Select
                                </md-button>
                                <md-button ng-click="changeFilterType('multiselector')">
                                    <ng-md-icon icon="done"
                                                ng-show="filter.options.filter_type !== 'multiselector'"
                                                style="visibility: hidden;"></ng-md-icon>
                                    <ng-md-icon icon="done"
                                                ng-show="filter.options.filter_type === 'multiselector'"></ng-md-icon>
                                    Multiple Select
                                </md-button>
                            </md-menu-content>
                        </md-menu>
                    </md-menu-item>

                    <md-menu-item>
                        <md-button ng-click="renameFilter(filter, $mdMenu, $event)"
                                   class="g-settings-option-btn">
                            <ng-md-icon icon="visibility_off"
                                        style="visibility: hidden;"></ng-md-icon>
                            <span>Rename</span>
                        </md-button>
                        <md-menu-content style="display: none"></md-menu-content>
                    </md-menu-item>

                    <md-menu-item>
                        <md-button ng-click="removeFilter(filter)" class="g-settings-option-btn">
                            <ng-md-icon icon="visibility_off"></ng-md-icon>
                            <span>Remove</span>
                        </md-button>
                    </md-menu-item>
                </md-menu-content>
            </md-menu>

            <!--<md-menu data-ng-if="!options.isRootEntityViewer">
                <md-button aria-label="Open phone interactions menu" class="md-icon-button"
                           ng-click="openFilterSettings($mdOpenMenu, $event)">
                    <ng-md-icon icon="settings"></ng-md-icon>
                </md-button>
    
                <md-menu-content width="3">
                    <md-menu-item>
                        <md-menu>
                            <md-button aria-label="show submenu with filter types">
                                &lt;!&ndash;<ng-md-icon icon="visibility_off"
                                            style="visibility: hidden;"></ng-md-icon>&ndash;&gt;
                                <ng-md-icon icon="arrow_drop_up"
                                            class="z-dropdown-icon"></ng-md-icon>
                                <span>Filter</span>
                            </md-button>
                            <md-menu-content>
                                <md-button>Equal</md-button>
                                <md-button>Not equal</md-button>
                                <md-button>Greater than</md-button>
                                <md-button>Greater or equal to</md-button>
                                <md-button>Lesser than</md-button>
                                <md-button>Lesser or equal to</md-button>
                                <md-button>From ... to ... (incl)</md-button>
                                <md-button>Top N items</md-button>
                            </md-menu-content>
                        </md-menu>
                    </md-menu-item>
                    <md-menu-item>
                        <md-menu>
                            <md-button ng-click="renameFilter(filter, $mdMenu, $event)"
                                       class="g-settings-option-btn">
                                <ng-md-icon icon="visibility_off"
                                            style="visibility: hidden;"></ng-md-icon>
                                <span>Rename</span>
                            </md-button>
                            <md-menu-content style="display: none"></md-menu-content>
                        </md-menu>
                    </md-menu-item>
                    <md-menu-item>
                        <md-button ng-click="removeFilter(filter)" class="g-settings-option-btn">
                            <ng-md-icon icon="visibility_off"></ng-md-icon>
                            <span>Remove</span>
                        </md-button>
                    </md-menu-item>
                    <md-menu-item>
                        <md-button ng-click="useFromAbove(filter)" class="g-settings-option-btn">
                            <ng-md-icon icon="done" data-ng-show="filter.options.useFromAbove"></ng-md-icon>
                            <ng-md-icon icon="done" style="visibility: hidden;"
                                        data-ng-show="!filter.options.useFromAbove"></ng-md-icon>
                            <span>Link to above</span>
                        </md-button>
                    </md-menu-item>
                </md-menu-content>
            </md-menu>-->
        </div>

        <div ng-if="!isRootEntityViewer" flex="15">
            <use-from-above-button item="filter.options.use_from_above"
                                   data="{attributes: getAttributesFromAbove()}"></use-from-above-button>
        </div>

    </div>

</md-card>
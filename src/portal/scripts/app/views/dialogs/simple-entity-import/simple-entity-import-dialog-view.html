<md-dialog aria-label="" ng-cloak class="transaction-import-manager-dialog-view draggable-dialog width-80" drag-dialog>
    <md-toolbar>
        <dialog-header
                data-title="Simple Import"
                cancel-dialog="vm.cancel()"
        >
        </dialog-header>
    </md-toolbar>
    <md-dialog-content style="min-height: 50vh;" >
        <div data-ng-if="vm.readyStatus.schemes"
             layout="column"
             style="padding: 0 20px" class="import-page simple-import-page">

            <div layout="column" style="margin-bottom: 20px; width: 300px;">

                <dropdown-select model="vm.activeContentType"
                                 placeholder-text="Entity"
                                 menu-options="vm.contentTypes"
                                 on-change-callback="vm.getSchemeList()"
                                 small-options="{noIndicatorBtn: true, dialogParent: '.dialog-containers-wrap'}"
                                 class=" m-t-16"></dropdown-select>


                <div class="position-relative" layout="row">
                    <dropdown-select
                            model="vm.config.scheme"
                            placeholder-text="Import scheme"
                            menu-options="vm.entitySchemes"
                            small-options="{noIndicatorBtn: true, dialogParent: '.dialog-containers-wrap'}"
                            class=" m-t-8 width-100"></dropdown-select>
                    <md-button
                            class="scheme-edit-button md-fab {{vm.config.scheme && vm.hasSchemeEditPermission? '' : 'disabled-btn' }}"
                            data-ng-click="vm.editScheme($event)" style="top: 3px;">
                        <span class="material-icons" style="font-size: 24px;">edit</span>
                        <md-tooltip class="tooltip_1" md-direction="top">Edit Scheme</md-tooltip>
                    </md-button>
                </div>


                <md-input-container flex="40" style="margin-bottom: 0" class="ng-hide">
                    <input type="file" id="importDataUploadInput" input-file-directive
                           read-file="vm.config.file"
                           read-file-change="vm.checkExtension(vm.config.file, 'csv', $event)">
                </md-input-container>
                <div class="input-upload-file-container">
                    <p class="importDataUploadInput">Entity</p>
                    <label for="importDataUploadInput" class="md-button md-raised md-primary IFUlabel">
                        <span>Browse</span></label>
                </div>

                <div layout="row" layout-align="end center" class="m-t-8">

                    <div data-ng-if="vm.readyStatus.processing" class="m-l-16 m-t-8" style="position: relative; top: -4px;">
                        <progress-circular diameter="20"></progress-circular>
                    </div>
                    <md-button
                            class="link-button {{vm.loadIsAvailable() ? '' : 'disabled-btn' }}"
                            data-ng-click="vm.validateImport($event)">
                        VALIDATE
                    </md-button>
                    <md-button
                            class="md-raised import-button {{vm.loadIsAvailable() ? '' : 'disabled-btn' }}"
                            data-ng-click="vm.startImportWithValidation($event)">
                        IMPORT
                    </md-button>

                </div>
            </div>

            <div layout="row"
                 data-ng-if="vm.finishedSuccess"
                 layout-align="center center">
                <h2>The data successfully imported.</h2>
            </div>


            <div class="loader-dialog" data-ng-if="vm.processing">

                <div>

                    <div data-ng-if="vm.loaderData.total" class="loader-description">
                        <b>{{vm.loaderData.text}}</b> {{vm.loaderData.current}} / {{vm.loaderData.total}}
                    </div>

                    <div data-ng-if="vm.loaderData.additional.length">

                        <div data-ng-repeat="item in vm.loaderData.additional">

                            <div data-ng-if="item.total" class="text-center">
                                <b>{{item.text}}</b> {{item.current}} / {{item.total}}
                            </div>

                        </div>

                    </div>

                    <div layout="row" layout-sm="column" layout-align="space-around" class="loader-spinner">
                        <progress-circular diameter="100"></progress-circular>
                    </div>

                </div>

            </div>


        </div>
        <div data-ng-if="!vm.readyStatus.schemes">
            <div layout="row" layout-sm="column" layout-align="space-around" class="m-large">
                <progress-circular diameter="100"></progress-circular>
            </div>
        </div>
    </md-dialog-content>
    <md-dialog-actions layout="row">
        <md-button class="" ng-click="vm.cancel()">
            Close
        </md-button>
    </md-dialog-actions>
</md-dialog>